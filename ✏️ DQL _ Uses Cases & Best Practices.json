{"version":"6","defaultTimeframe":{"from":"now()-1h","to":"now()"},"defaultSegments":[],"sections":[{"id":"2c2a2267-a1ae-4967-8764-7dd52f3a8154","type":"markdown","markdown":"# DQL Uses Cases & Best Practices\nEste Notebook proporciona documentación y casos de uso con DQL.\n\n**Preguntas o feedback?**: [angelica.barranco@dynatrace.com](mailto:angelica.barranco@dynatrace.com?subject=Feedback%20on%20Grail)\n\nPara obtener más información sobre Dynatrace Query Language (DQL), vaya aquí:\n* [(Doc) Dynatrace Query Language (DQL)](https://docs.dynatrace.com/docs/shortlink/dql-dynatrace-query-language-hub)\n* [(Doc) DQL commands](https://docs.dynatrace.com/docs/shortlink/dql-commands-overview)\n* [(Video) A Practical Guide to DQL](https://www.youtube.com/watch?v=F2VbVqNlswk)\n* [(APP) Learn DQL](https://wkf10640.apps.dynatrace.com/ui/apps/dynatrace.learndql/)"},{"id":"976196de-6d10-4254-a9e2-1b6a8bb15b36","type":"markdown","markdown":"---"},{"id":"db72056e-b69d-4965-a1fb-005a7760ede7","type":"markdown","markdown":"## Como inicio una query?\n\nUna query puede iniciar con uno de estos **4** comandos:\n* `data` : Genera datos de muestra durante el tiempo de ejecución de la consulta.\n* `describe`: Describe el esquema de datos para un objeto de datos determinado.\n* `fetch`: Carga datos del recurso especificado.\n* `timeseries`: Combina cargar, filtrar y agregar datos de métricas en una salida de time series."},{"id":"0e93b295-ee0f-48fc-852d-3252a300ba26","type":"markdown","markdown":"# [`data`](https://docs.dynatrace.com/docs/shortlink/data-source-commands#data)\n> Genera datos de muestra durante el tiempo de ejecución de la consulta."},{"id":"ef7b540c-043a-4371-b80b-ae2d0f5e298f","type":"markdown","markdown":"🎯 Lista de tipos de datos ingestados en Dynatrace (spans, RUM, bizevents, sythectic). \n* Si esta disponible en Grail `storage.grail = true`.\n* Si esta disponible en almacenamiento clásico `storage.classic = true`."},{"id":"f9f80872-a12f-4c0b-acb5-172030b07df2","type":"dql","title":"Grail data","filterSegments":[],"drilldownPath":[],"height":197,"state":{"input":{"value":"data record(data = \"logs\", storage.grail = true),\n     record(data = \"DEM\", storage.grail = true, storage.classic=true)","timeframe":{"from":"now()-2h","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"data":"logs","storage.grail":true,"storage.classic":null},{"data":"DEM","storage.grail":true,"storage.classic":true},{"data":"spans","storage.grail":true,"storage.classic":null},{"data":"RUM","storage.grail":true,"storage.classic":null},{"data":"bizevents","storage.grail":true,"storage.classic":true},{"data":"sythectic","storage.grail":true,"storage.classic":null}],"metadata":{"grail":{"canonicalQuery":"data record(data = \"logs\", storage.grail = TRUE), record(data = \"DEM\", storage.grail = TRUE, storage.classic = TRUE), record(data = \"spans\", storage.grail = TRUE), record(data = \"RUM\", storage.grail = TRUE), record(data = \"bizevents\", storage.grail = TRUE, storage.classic = TRUE), record(data = \"sythectic\", storage.grail = TRUE)","timezone":"America/Bogota","query":"data record(data = \"logs\", storage.grail = true),\n     record(data = \"DEM\", storage.grail = true, storage.classic=true),\n     record(data = \"spans\", storage.grail = true),\n     record(data = \"RUM\", storage.grail = true),\n     record(data = \"bizevents\", storage.grail = true, storage.classic=true),\n     record(data = \"sythectic\", storage.grail = true)","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"locale":"en-US","executionTimeMilliseconds":2,"notifications":[],"queryId":"d3289aec-52d3-4ccf-be00-42c67e4e4e88","sampled":false}},"types":[{"mappings":{"data":{"type":"string"},"storage.grail":{"type":"boolean"},"storage.classic":{"type":"undefined"}},"indexRange":[0,0]},{"mappings":{"data":{"type":"string"},"storage.grail":{"type":"boolean"},"storage.classic":{"type":"boolean"}},"indexRange":[1,5]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.148Z","input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"data record(data = \"logs\", storage.grail = true),\n     record(data = \"DEM\", storage.grail = true, storage.classic=true),\n     record(data = \"spans\", storage.grail = true),\n     record(data = \"RUM\", storage.grail = true),\n     record(data = \"bizevents\", storage.grail = true, storage.classic=true),\n     record(data = \"sythectic\", storage.grail = true)"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["data"],"categoryAxisLabel":"data","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"a","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["data","storage.grail","storage.classic"],"dataMappings":{"value":"data"},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","displayedFields":["data"]},"autoSelectVisualization":false},"state":"success"}},{"id":"d46e0cac-8c3e-4013-9296-1811aabf0672","type":"markdown","markdown":"# [`describe`](https://docs.dynatrace.com/docs/shortlink/data-source-commands#describe)\n> Describe el esquema de datos para un objeto de datos determinado."},{"id":"72da8832-4cf5-4afa-acd7-fc44f7251d5e","type":"markdown","markdown":"🎯 Cuantas propiedades/fields conocidos tienen los `host` en este ambiente? Y listar por orden alfabetico.\n\n*Hints:*\n* Usar [Ordering commands](https://docs.dynatrace.com/docs/shortlink/ordering-commands)"},{"id":"a1e1d2f8-b07e-4bf9-a78c-b21802cfba63","type":"dql","filterSegments":[],"drilldownPath":[],"state":{"input":{"value":"","timeframe":{"from":"now()-2h","to":"now()"}},"visualization":"recordView","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"field":"accessible_by","data_types":["record"]},{"field":"additionalSystemInfo","data_types":["record"]},{"field":"autoInjection","data_types":["string"]},{"field":"awsNameTag","data_types":["string"]},{"field":"azureComputeModeName","data_types":["string"]},{"field":"azureEnvironment","data_types":["string"]},{"field":"azureHostNames","data_types":["array"]},{"field":"azureResourceGroupName","data_types":["string"]},{"field":"azureSiteNames","data_types":["array"]},{"field":"azureSku","data_types":["string"]},{"field":"azureVmScaleSetName","data_types":["string"]},{"field":"azureVmSizeLabel","data_types":["string"]},{"field":"azureZone","data_types":["string"]},{"field":"belongs_to","data_types":["record"]},{"field":"bitness","data_types":["string"]},{"field":"boshAvailabilityZone","data_types":["string"]},{"field":"boshDeploymentId","data_types":["string"]},{"field":"boshInstanceId","data_types":["string"]},{"field":"boshInstanceName","data_types":["string"]},{"field":"boshName","data_types":["string"]},{"field":"boshStemcellVersion","data_types":["string"]},{"field":"called_by","data_types":["record"]},{"field":"calls","data_types":["record"]},{"field":"cloudPlatformVendorVersion","data_types":["string"]},{"field":"cloudType","data_types":["string"]},{"field":"clustered_by","data_types":["record"]},{"field":"contains","data_types":["record"]},{"field":"cpuCores","data_types":["long"]},{"field":"customHostMetadata","data_types":["array"]},{"field":"dnsNames","data_types":["array"]},{"field":"dt.security_context","data_types":["array"]},{"field":"dt.system.environment","data_types":["string"]},{"field":"dt.system.table","data_types":["string"]},{"field":"ebpfDiscoveryMonitored","data_types":["boolean"]},{"field":"ebpfHasPublicTraffic","data_types":["boolean"]},{"field":"entity.conditional_name","data_types":["string"]},{"field":"entity.customized_name","data_types":["string"]},{"field":"entity.detected_name","data_types":["string"]},{"field":"entity.name","data_types":["string"]},{"field":"entity.type","data_types":["string"]},{"field":"gceHostName","data_types":["string"]},{"field":"gceInstanceId","data_types":["string"]},{"field":"gceInstanceName","data_types":["string"]},{"field":"gceMachineType","data_types":["string"]},{"field":"gceNumericProjectId","data_types":["string"]},{"field":"gceProjectId","data_types":["string"]},{"field":"gcePublicIpAddresses","data_types":["array"]},{"field":"gcpZone","data_types":["string"]},{"field":"hasPublicTraffic","data_types":["boolean"]},{"field":"hostGroupName","data_types":["string"]},{"field":"hosts","data_types":["record"]},{"field":"hypervisorType","data_types":["string"]},{"field":"icon","data_types":["record"]},{"field":"id","data_types":["string"]},{"field":"installerPotentialProblem","data_types":["boolean"]},{"field":"installerSupportAlert","data_types":["boolean"]},{"field":"installerTrackedDownload","data_types":["boolean"]},{"field":"installerVersion","data_types":["string"]},{"field":"instance_of","data_types":["record"]},{"field":"ipAddress","data_types":["array"]},{"field":"isMonitoringCandidate","data_types":["boolean"]},{"field":"kubernetesLabels","data_types":["record"]},{"field":"lifetime","data_types":["timeframe"]},{"field":"logFileStatus","data_types":["record"]},{"field":"logPathLastUpdate","data_types":["record"]},{"field":"logSourceState","data_types":["record"]},{"field":"logicalCpuCores","data_types":["long"]},{"field":"logicalCpus","data_types":["long"]},{"field":"macAddresses","data_types":["array"]},{"field":"managementZones","data_types":["array"]},{"field":"memoryTotal","data_types":["long"]},{"field":"monitored_by","data_types":["record"]},{"field":"monitoringMode","data_types":["string"]},{"field":"networkZone","data_types":["string"]},{"field":"oneAgentCustomHostName","data_types":["string"]},{"field":"osArchitecture","data_types":["string"]},{"field":"osServices","data_types":["array"]},{"field":"osType","data_types":["string"]},{"field":"osVersion","data_types":["string"]},{"field":"paasMemoryLimit","data_types":["long"]},{"field":"paasVendorType","data_types":["string"]},{"field":"physicalMemory","data_types":["long"]},{"field":"runs","data_types":["record"]},{"field":"runs_on","data_types":["record"]},{"field":"same_as","data_types":["record"]},{"field":"simultaneousMultithreading","data_types":["long"]},{"field":"softwareTechnologies","data_types":["array"]},{"field":"standalone","data_types":["boolean"]},{"field":"standaloneSpecialAgentsOnly","data_types":["boolean"]},{"field":"state","data_types":["string"]},{"field":"tags","data_types":["array"]},{"field":"virtualCpus","data_types":["long"]},{"field":"zosCPUModelNumber","data_types":["string"]},{"field":"zosCPUSerialNumber","data_types":["string"]},{"field":"zosLparName","data_types":["string"]},{"field":"zosSystemName","data_types":["string"]},{"field":"zosTotalGeneralPurposeProcessors","data_types":["long"]},{"field":"zosTotalPhysicalMemory","data_types":["long"]},{"field":"zosTotalZiipProcessors","data_types":["long"]},{"field":"zosVirtualization","data_types":["string"]}],"metadata":{"grail":{"canonicalQuery":"describe dt.entity.host\n| sort field","timezone":"America/Bogota","query":"describe dt.entity.host\n| sort field asc","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-29T05:30:37.227Z","end":"2024-10-29T07:30:37.227Z"},"locale":"en-US","executionTimeMilliseconds":28,"notifications":[],"queryId":"b373d3c5-0f52-4627-b0f3-3f896b163545","sampled":false}},"types":[{"mappings":{"field":{"type":"string"},"data_types":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,0]}]}},"indexRange":[0,99]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.191Z","input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"describe dt.entity.host\n| sort field asc"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["field"],"categoryAxisLabel":"field","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"field","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","displayedFields":["field"]},"autoSelectVisualization":true},"state":"success"}},{"id":"9e0e3516-8596-4231-b594-e5f58af79503","type":"markdown","markdown":"# [`fetch`](https://docs.dynatrace.com/docs/shortlink/data-source-commands#fetch)\n> Carga datos del recurso especificado."},{"id":"f86645d4-c0fb-4195-9015-9d868124e2ee","type":"markdown","markdown":"🎯 Listar los host. Mostar solo `nombre`, `ip` y `tags`.\n\n*Hints:*\n* Usar el resultado de la query anterior.\n* Usar [`Selection and modification commands`](https://docs.dynatrace.com/docs/shortlink/selection-and-modification-commands)"},{"id":"2d2c155f-8b8b-4079-ab98-aae756d3f53f","type":"dql","filterSegments":[],"drilldownPath":[],"height":183,"state":{"input":{"value":"","timeframe":{"from":"now()-2h","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"nombre":"i-061c82f7d0e098b13","ip":["172.31.23.60","172.31.23.247","52.87.184.255","172.31.23.111"],"tags":["[AWS]eks\\:nodegroup-name:aws-eks-3-node-group","[AWS]dt_owner_team:team-demoability","[AWS]aws\\:ec2\\:fleet-id:fleet-f31f992c-238c-ccb4-0692-8780b36ba922","[AWS]ShouldBeReserved:true","[AWS]aws\\:eks\\:cluster-name:aws-eks-3","[AWS]aws\\:ec2launchtemplate\\:version:7","[AWS]dt_owner_email:rafal.psciuk@dynatrace.com","[AWS]aws\\:ec2launchtemplate\\:id:lt-0b5dee98d75688f5f","[AWS]kubernetes.io/cluster/aws-eks-3:owned","[AWS]k8s.io/cluster-autoscaler/aws-eks-3:owned","[AWS]eks\\:cluster-name:aws-eks-3","[AWS]aws\\:autoscaling\\:groupName:eks-aws-eks-3-node-group-82c2e4f8-58e1-4942-29b4-dcd6724037ce","[AWS]k8s.io/cluster-autoscaler/enabled:true"]},{"nombre":"i-0366a836f9aee5f51","ip":["172.31.36.51","172.31.35.190","172.31.38.227","54.173.214.233","172.31.37.144"],"tags":["[AWS]eks\\:nodegroup-name:aws-eks-3-node-group","[AWS]dt_owner_team:team-demoability","[AWS]ShouldBeReserved:true","[AWS]aws\\:eks\\:cluster-name:aws-eks-3","[AWS]aws\\:ec2launchtemplate\\:version:7","[AWS]aws\\:ec2\\:fleet-id:fleet-f90c920c-d19d-c914-2e12-0c02a23d2af2","[AWS]dt_owner_email:rafal.psciuk@dynatrace.com","[AWS]aws\\:ec2launchtemplate\\:id:lt-0b5dee98d75688f5f","[AWS]kubernetes.io/cluster/aws-eks-3:owned","[AWS]k8s.io/cluster-autoscaler/aws-eks-3:owned","[AWS]eks\\:cluster-name:aws-eks-3","[AWS]aws\\:autoscaling\\:groupName:eks-aws-eks-3-node-group-82c2e4f8-58e1-4942-29b4-dcd6724037ce","[AWS]k8s.io/cluster-autoscaler/enabled:true"]},{"nombre":"i-0cf1f2730768b7250","ip":["172.31.73.190","172.31.72.212","172.31.73.233","172.31.74.188","100.28.222.82"],"tags":["[AWS]eks\\:nodegroup-name:aws-eks-3-node-group","[AWS]dt_owner_team:team-demoability","[AWS]ShouldBeReserved:true","[AWS]aws\\:eks\\:cluster-name:aws-eks-3","[AWS]aws\\:ec2\\:fleet-id:fleet-d33fbb0c-2b8e-cc9c-2c98-052a198820f4","[AWS]aws\\:ec2launchtemplate\\:version:7","[AWS]dt_owner_email:rafal.psciuk@dynatrace.com","[AWS]aws\\:ec2launchtemplate\\:id:lt-0b5dee98d75688f5f","[AWS]kubernetes.io/cluster/aws-eks-3:owned","[AWS]k8s.io/cluster-autoscaler/aws-eks-3:owned","[AWS]eks\\:cluster-name:aws-eks-3","[AWS]aws\\:autoscaling\\:groupName:eks-aws-eks-3-node-group-82c2e4f8-58e1-4942-29b4-dcd6724037ce","[AWS]k8s.io/cluster-autoscaler/enabled:true"]},{"nombre":"i-0d611f7adcde23fd3","ip":["172.31.91.68","172.31.92.156","172.31.94.96","44.204.227.111","172.31.89.131"],"tags":["[AWS]eks\\:nodegroup-name:aws-eks-3-node-group","[AWS]dt_owner_team:team-demoability","[AWS]ShouldBeReserved:true","[AWS]aws\\:eks\\:cluster-name:aws-eks-3","[AWS]aws\\:ec2launchtemplate\\:version:7","[AWS]aws\\:ec2\\:fleet-id:fleet-6f9f25b7-342e-ec05-8612-83aabdc31ec7","[AWS]dt_owner_email:rafal.psciuk@dynatrace.com","[AWS]aws\\:ec2launchtemplate\\:id:lt-0b5dee98d75688f5f","[AWS]kubernetes.io/cluster/aws-eks-3:owned","[AWS]k8s.io/cluster-autoscaler/aws-eks-3:owned","[AWS]eks\\:cluster-name:aws-eks-3","[AWS]aws\\:autoscaling\\:groupName:eks-aws-eks-3-node-group-82c2e4f8-58e1-4942-29b4-dcd6724037ce","[AWS]k8s.io/cluster-autoscaler/enabled:true"]},{"nombre":"lnx1-demo.c.dynatrace-demoability.internal","ip":["35.209.141.232","10.128.0.2"],"tags":["[GoogleCloud]web"]}],"metadata":{"grail":{"canonicalQuery":"fetch dt.entity.host\n| fieldsAdd ipAddress, tags\n| fieldsRemove id\n| fieldsRename nombre = entity.name, ip = ipAddress","timezone":"America/Bogota","query":"fetch dt.entity.host\n| fieldsAdd ipAddress, tags\n| fieldsRemove id\n| fieldsRename nombre=entity.name, ip=ipAddress","scannedRecords":5,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-29T05:30:37.236Z","end":"2024-10-29T07:30:37.236Z"},"locale":"en-US","executionTimeMilliseconds":32,"notifications":[],"queryId":"12a3df22-1e8a-4c26-a5c0-f130f2d1a488","sampled":false}},"types":[{"mappings":{"nombre":{"type":"string"},"ip":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,3]}]},"tags":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,12]}]}},"indexRange":[0,0]},{"mappings":{"nombre":{"type":"string"},"ip":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,4]}]},"tags":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,12]}]}},"indexRange":[1,3]},{"mappings":{"nombre":{"type":"string"},"ip":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,1]}]},"tags":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,0]}]}},"indexRange":[4,4]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.220Z","input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"fetch dt.entity.host\n| fieldsAdd ipAddress, tags\n| fieldsRemove id\n| fieldsRename nombre=entity.name, ip=ipAddress"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nombre"],"categoryAxisLabel":"nombre","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"entity.name","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","displayedFields":["nombre"]},"autoSelectVisualization":false},"state":"success"}},{"id":"eeedfb24-713d-4595-9ddb-7f31a64a241d","type":"markdown","markdown":"# [`timeseries`](https://docs.dynatrace.com/docs/shortlink/data-source-commands#fetch)\n> Cargar, filtrar y agregar datos de métricas en una salida de time series."},{"id":"7bea84a9-8e63-4445-a4d6-0c37c4b097ce","type":"markdown","markdown":"🎯 Tiempo del tiempo de respuesta promedio (ms) del servicio con mayor cantidad de peticiones de las últimas 24h.\n\n*Hints:*\n* Usar [Array functions](https://docs.dynatrace.com/docs/shortlink/array-functions)"},{"id":"d7035d8e-137a-4c82-a859-68822fcbd1d8","type":"dql","filterSegments":[],"drilldownPath":[],"height":109,"state":{"input":{"value":"","timeframe":{"from":"now()-24h","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"timeframe":{"start":"2024-10-28T07:30:00.000Z","end":"2024-10-29T07:40:00.000Z"},"interval":"600000000000","dt.entity.service":"SERVICE-BB70AC06A7A066E2","tiempo de respuesta":[22098.822258940163,20648.414543524417,21557.555202779607,22271.13188627331,39910.13295820952,18574.17658243376,19506.733098866745,19926.23190778702,22811.858134250444,21199.506486000515,19184.267676111256,19225.97146104306,20361.1350907137,18399.719826209188,19008.14480993696,20178.104595879555,18734.066152649993,20483.402701479998,20999.41155924608,21280.231757959264,49571.39843962008,92399.80421535594,85374.85642737897,101117.7793696275,112903.83034064878,85434.96664728964,95131.24839719696,91579.93982430454,93101.1960604349,96521.69641214352,94432.52160581859,89840.98919543355,86495.7211772516,102053.44791815711,89084.25991348234,104688.65805747545,98905.59697848314,92960.21860430697,94339.17513545175,181134.4541663449,92518.11103032065,90528.35173764783,93491.10671050665,87876.36918538688,147149.64551457562,172665.93945910182,170559.38693201833,171587.90476583113,146648.8362218371,159216.83581057726,173906.37955456154,172550.413093805,167801.8941048035,188531.2200879205,160481.64748468535,168483.3296218084,207755.20185770374,184580.5848140496,196576.37299950907,172206.58504265748,193986.92920081966,217608.79345917472,176344.93628488932,175477.37132616487,204061.68988715278,193573.3835015805,210615.3172427493,180320.75549227014,190942.28564211377,206448.93957358293,195119.82615350973,211218.22837632778,219281.16566666667,214715.41427618414,216848.43478773584,181550.80698217318,203080.85981519043,208831.66798373038,289070.680314767,206722.49277688604,229988.2062633631,231314.9407944042,208343.51378363537,331423.9790085989,238385.1737752542,242103.8901275858,227181.03409795414,330540.33702243783,282791.2355990105,306219.70376529277,371882.22496099846,349327.5252963284,339603.0666477595,336100.37429765164,336357.61821036105,313868.8641610738,301221.14881095366,316486.1580278129,313500.4278903456,325353.23053435114,323322.3057969135,304701.98419746634,329163.29068090016,355295.3278224605,356947.55829626636,329667.9772282761,338765.6755023514,339520.01686646225,344511.3511546979,355359.94895591645,360979.4209544536,404355.81878526387,437238.6289949942,309448.18794474675,396953.0152759527,399066.76317470457,386385.597827823,387047.29239200515,379247.40079024225,439458.2003032345,322977.0954861111,410210.95419321506,405838.37815526273,382980.6067107598,378620.9053667831,410510.0471730836,365960.87244742457,381983.49821215734,441062.1820159536,386288.3456010109,349291.1038630253,342219.5781444583,370884.59401159047,388806.1736902991,405028.3780375269,408743.89896564465,393116.889721453,342914.03634535265,411139.8203708829,421708.6800056762,470101.7600388601,451202.76463665784,481543.87176165805,503560.9335616438,22469.722222222223],"peticiones":[16946,16956,16693,16355,15817,16304,15354,15269,16283,15572,15388,15838,15819,15651,16021,15775,15434,15473,15174,15171,14740,13949,14376,13960,13533,13762,13414,13660,14164,14131,14024,14716,13557,13978,13870,13745,13106,13513,13658,12949,13753,13783,13382,13221,12418,12091,11356,12128,11540,11572,10731,10799,10992,10464,10774,10418,10443,9680,10185,11018,9760,9112,10390,11160,9216,9807,10068,9832,9897,9615,9146,9226,9000,8994,8480,9424,8874,8605,8133,8722,7951,8006,9105,7908,7573,8073,8065,6596,8489,8419,6410,6918,7052,6941,6370,7450,8326,7910,7551,7205,7711,7657,6932,6714,7419,7158,7017,7174,6322,6896,6433,6026,5194,7167,6088,6262,6261,6204,5821,5936,6912,5807,6299,6199,6298,5766,6562,5873,5516,6331,7067,6424,6212,6051,6502,5414,6139,6961,7226,7047,6176,6798,6176,5840,90],"tiempo de respuesta (avg)":223744.55433867924,"peticiones (total)":1448703,"dt.entity.service.name":"my-otel-demo-frontend"}],"metadata":{"grail":{"canonicalQuery":"timeseries by:{dt.entity.service}, {`tiempo de respuesta` = avg(dt.service.request.response_time, default:0), peticiones = sum(dt.service.request.count)}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| limit 1\n| fieldsAdd entityName(dt.entity.service)","timezone":"America/Bogota","query":"timeseries {`tiempo de respuesta`=avg(dt.service.request.response_time, default:0), peticiones=sum(dt.service.request.count )}, by:{dt.entity.service}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| limit 1\n| fieldsAdd entityName(dt.entity.service)","scannedRecords":1,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":261423,"analysisTimeframe":{"start":"2024-10-28T07:30:00.000Z","end":"2024-10-29T07:40:00.000Z"},"locale":"en-US","executionTimeMilliseconds":237,"notifications":[],"queryId":"2b170ce8-a400-474d-ae13-2c6d77f8df00","sampled":false},"metrics":[{"metric.key":"dt.service.request.response_time","displayName":"Service request response time","description":"Response time of a service measured in microseconds on the server side (server side measurements do not include e.g. proxy and networking times). Response time is the time until a response is sent to a calling application, process or other service. It does not include further asynchronous processing. To learn how Dynatrace calculates service timings, see [Service analysis timings](https://dt-url.net/service-timings).","unit":"us","fieldName":"tiempo de respuesta"},{"metric.key":"dt.service.request.count","displayName":"Service request count","description":"Number of requests received by a given service. To learn how Dynatrace detects and analyzes services, see [Services](https://dt-url.net/am-services).","unit":"count","fieldName":"peticiones"}]},"types":[{"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"dt.entity.service":{"type":"string"},"tiempo de respuesta":{"type":"array","types":[{"mappings":{"element":{"type":"double"}},"indexRange":[0,144]}]},"peticiones":{"type":"array","types":[{"mappings":{"element":{"type":"double"}},"indexRange":[0,144]}]},"tiempo de respuesta (avg)":{"type":"double"},"peticiones (total)":{"type":"double"},"dt.entity.service.name":{"type":"string"}},"indexRange":[0,0]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.245Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"timeseries {`tiempo de respuesta`=avg(dt.service.request.response_time, default:0), peticiones=sum(dt.service.request.count )}, by:{dt.entity.service}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| limit 1\n| fieldsAdd entityName(dt.entity.service)"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["dt.entity.service","dt.entity.service.name"],"categoryAxisLabel":"dt.entity.service,dt.entity.service.name","valueAxis":["tiempo de respuesta (avg)","peticiones (total)"],"valueAxisLabel":"tiempo de respuesta (avg),peticiones (total)","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","xAxisScaling":"analyzedTimeframe","truncationMode":"middle","bandChartSettings":{"lower":"tiempo de respuesta","upper":"peticiones","time":"timeframe"},"hiddenLegendFields":["dt.entity.service"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["tiempo de respuesta","peticiones"],"leftAxisDimensions":["dt.entity.service","tiempo de respuesta (avg)","peticiones (total)","dt.entity.service.name"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.service","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[["timeframe"],["interval"]],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{"[\"tiempo de respuesta\"]":310.625,"[\"peticiones\"]":290.0625,"[\"dt.entity.service\"]":108.796875},"columnTypeOverrides":[{"id":7432270.100000024,"fields":["tiempo de respuesta"],"value":"sparkline"},{"id":7437445.700000048,"fields":["peticiones"],"value":"sparkline"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["dt.entity.service","dt.entity.service.name"],"dataMappings":{"value":"interval"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"tiempo de respuesta (avg)","rangeAxis":""},{"valueAxis":"peticiones (total)","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.service","dt.entity.service.name"]},"unitsOverrides":[{"identifier":"tiempo de respuesta (avg)","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1730177007934}]},"state":"success"}},{"id":"691d5927-812c-4ce7-a96c-e674b23d08c9","type":"markdown","markdown":"🎯 Agregar a la query anterior el uso promedio de cpu `dt.kubernetes.container.cpu_usage` del container de todos los servicios que corran en k8s.\n\n*Hints:*\n* Usar [Correlation and join commands](https://docs.dynatrace.com/docs/shortlink/correlation-and-join-commands)"},{"id":"50955d50-6580-4b5e-86b8-524833a3348a","type":"dql","filterSegments":[],"drilldownPath":[],"height":253,"state":{"input":{"value":"","timeframe":{"from":"now()-24h","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"dt.entity.service":"SERVICE-BB70AC06A7A066E2","dt.entity.service.name":"my-otel-demo-frontend","peticiones (total)":1448703,"tiempo de respuesta (avg)":223744.55433867924,"cpu_usage container (avg)":131.67599250726678},{"dt.entity.service":"SERVICE-B0EB6A5E6F9637DB","dt.entity.service.name":"my-otel-demo-frontendproxy","peticiones (total)":1391623,"tiempo de respuesta (avg)":528483.4992130451,"cpu_usage container (avg)":20.379307265541733},{"dt.entity.service":"SERVICE-F93BACC491AF3D73","dt.entity.service.name":"[eks][obslab-log-problem-detection] frontend","peticiones (total)":1021701,"tiempo de respuesta (avg)":82798.00923537201,"cpu_usage container (avg)":131.67599250726678},{"dt.entity.service":"SERVICE-955F75DE11DBDB5D","dt.entity.service.name":"[eks][obslab-release-validation] frontend","peticiones (total)":919564,"tiempo de respuesta (avg)":75673.046904541,"cpu_usage container (avg)":125.51243861469162},{"dt.entity.service":"SERVICE-2D92D956F0178324","dt.entity.service.name":"my-otel-demo-productcatalogservice","peticiones (total)":448147,"tiempo de respuesta (avg)":4121.252721088666,"cpu_usage container (avg)":12.212107080928629},{"dt.entity.service":"SERVICE-939BD79A70E3B49F","dt.entity.service.name":"[eks][easytrade] easyTradeManager","peticiones (total)":314782,"tiempo de respuesta (avg)":10821.715303202707,"cpu_usage container (avg)":39.04574206319299},{"dt.entity.service":"SERVICE-0FD79892EC27A6E4","dt.entity.service.name":"my-otel-demo-loadgenerator","peticiones (total)":307462,"tiempo de respuesta (avg)":1457380.9737935,"cpu_usage container (avg)":1852.8930658296424},{"dt.entity.service":"SERVICE-2BF0208BBAC4181E","dt.entity.service.name":"my-otel-demo-flagd","peticiones (total)":305263,"tiempo de respuesta (avg)":1355771.7971680763,"cpu_usage container (avg)":3.1482758178994112},{"dt.entity.service":"SERVICE-AA6C2FAB4D6D9024","dt.entity.service.name":"[eks][easytrade] :80","peticiones (total)":224553,"tiempo de respuesta (avg)":95277.71911698679,"cpu_usage container (avg)":33.39327733583963},{"dt.entity.service":"SERVICE-813401C81EB14140","dt.entity.service.name":"[eks][easytrade] FlagController","peticiones (total)":191757,"tiempo de respuesta (avg)":1535.6866204718247,"cpu_usage container (avg)":7.298049772446561},{"dt.entity.service":"SERVICE-46F0501C3643F083","dt.entity.service.name":"[eks][prod] hipstershop.CurrencyService","peticiones (total)":155088,"tiempo de respuesta (avg)":2010.1800200807152,"cpu_usage container (avg)":11.427495567810366},{"dt.entity.service":"SERVICE-8C3C0F907E8AF45B","dt.entity.service.name":"[eks][easytrade] easytrade_offer_service","peticiones (total)":142900,"tiempo de respuesta (avg)":174950.4952570659,"cpu_usage container (avg)":31.352236978090648},{"dt.entity.service":"SERVICE-41974C9CBD4F67A1","dt.entity.service.name":"my-otel-demo-cartservice","peticiones (total)":141785,"tiempo de respuesta (avg)":10981.22407747582,"cpu_usage container (avg)":9.803167978818756},{"dt.entity.service":"SERVICE-43BD6F47B6C61EF2","dt.entity.service.name":"my-otel-demo-currencyservice","peticiones (total)":139499,"tiempo de respuesta (avg)":37127.77139670923,"cpu_usage container (avg)":3.0034675676053033},{"dt.entity.service":"SERVICE-A9F1692715765CC7","dt.entity.service.name":"[eks][prod] :8080","peticiones (total)":137686,"tiempo de respuesta (avg)":385422.6979271869,"cpu_usage container (avg)":21.75314059994074},{"dt.entity.service":"SERVICE-B7A219B035F47228","dt.entity.service.name":"[eks][prod] hipstershop.ProductCatalogService","peticiones (total)":136571,"tiempo de respuesta (avg)":301.3886559954431,"cpu_usage container (avg)":21.75314059994074},{"dt.entity.service":"SERVICE-CA80218A512666FD","dt.entity.service.name":"[eks][prod] :9090","peticiones (total)":120465,"tiempo de respuesta (avg)":451311.32150458306,"cpu_usage container (avg)":4.95227805386931},{"dt.entity.service":"SERVICE-97FAB1811C3FB1C4","dt.entity.service.name":"[eks][easytrade] BrokerService","peticiones (total)":82569,"tiempo de respuesta (avg)":323446.4820063502,"cpu_usage container (avg)":119.0964454303709},{"dt.entity.service":"SERVICE-BC7E736441538950","dt.entity.service.name":"[eks][easytrade] NotMiningBitcoin","peticiones (total)":82569,"tiempo de respuesta (avg)":317898.48760932236,"cpu_usage container (avg)":119.0964454303709},{"dt.entity.service":"SERVICE-E36B7404E618277D","dt.entity.service.name":"my-otel-demo-recommendationservice","peticiones (total)":72476,"tiempo de respuesta (avg)":12314.88495974768,"cpu_usage container (avg)":11.184363875784925},{"dt.entity.service":"SERVICE-CC13C8ED75563D8A","dt.entity.service.name":"[eks][unguard] my_database","peticiones (total)":59138,"tiempo de respuesta (avg)":2588.249576375194,"cpu_usage container (avg)":2.368312794022996},{"dt.entity.service":"SERVICE-5B0BEF3F32F3E20A","dt.entity.service.name":"[eks][unguard] user-auth-service","peticiones (total)":58645,"tiempo de respuesta (avg)":5508.923861924043,"cpu_usage container (avg)":7.713555514860526},{"dt.entity.service":"SERVICE-0E43BCE438D149AC","dt.entity.service.name":"[eks][prod] cartservice","peticiones (total)":54299,"tiempo de respuesta (avg)":879859.2399079242,"cpu_usage container (avg)":8.073250760781267},{"dt.entity.service":"SERVICE-3173BE5994AD5D2B","dt.entity.service.name":"[eks][unguard] frontend","peticiones (total)":53976,"tiempo de respuesta (avg)":410534.34974601114,"cpu_usage container (avg)":14.532113981751584},{"dt.entity.service":"SERVICE-649FFC3906D9B88D","dt.entity.service.name":"[eks][prod] RecommendationService","peticiones (total)":51766,"tiempo de respuesta (avg)":1692.1075353044614,"cpu_usage container (avg)":7.069369667538857},{"dt.entity.service":"SERVICE-15AC99E0127CF39A","dt.entity.service.name":"[eks][easytrade] TradeManagement","peticiones (total)":51034,"tiempo de respuesta (avg)":38046.94156164742,"cpu_usage container (avg)":21.518350632544617},{"dt.entity.service":"SERVICE-83D6D71476CDC617","dt.entity.service.name":"[eks][unguard] Redis","peticiones (total)":44370,"tiempo de respuesta (avg)":99.32405260708404,"cpu_usage container (avg)":1.4104019966901025},{"dt.entity.service":"SERVICE-09906A02CEE6C616","dt.entity.service.name":"[eks][easytrade] :3000","peticiones (total)":43822,"tiempo de respuesta (avg)":15343.78172330937,"cpu_usage container (avg)":1.416348920945395},{"dt.entity.service":"SERVICE-C5E0081A018238F7","dt.entity.service.name":"[eks][unguard] status-service unguard-status-service-* on port 80","peticiones (total)":41154,"tiempo de respuesta (avg)":271545.3778422003,"cpu_usage container (avg)":3.784388799402066},{"dt.entity.service":"SERVICE-29D14F7C0D5D4BBE","dt.entity.service.name":"[eks][prod] hipstershop.CartService","peticiones (total)":37031,"tiempo de respuesta (avg)":1287234.5257415185,"cpu_usage container (avg)":8.073250760781267},{"dt.entity.service":"SERVICE-21C314FD9F54604C","dt.entity.service.name":"[eks][easytrade] PriceAnalysisComputation","peticiones (total)":36659,"tiempo de respuesta (avg)":3572.917665051464,"cpu_usage container (avg)":0.9775460266309641},{"dt.entity.service":"SERVICE-F6352A908DA4BE79","dt.entity.service.name":"[eks][easytrade] :8080","peticiones (total)":36642,"tiempo de respuesta (avg)":129109.85198677347,"cpu_usage container (avg)":11.528129859937573},{"dt.entity.service":"SERVICE-194F71F10D636C02","dt.entity.service.name":"[eks][obslab-log-problem-detection] dynatrace-otel-collector dynatrace-collector-opentelemetry-collector-* on port 4318","peticiones (total)":30170,"tiempo de respuesta (avg)":23458.7224090539,"cpu_usage container (avg)":26.32658300567563},{"dt.entity.service":"SERVICE-1E603F662885CA69","dt.entity.service.name":"[eks][easytrade] AccountControllerV2","peticiones (total)":29222,"tiempo de respuesta (avg)":20320.57837509886,"cpu_usage container (avg)":6.075250209838387},{"dt.entity.service":"SERVICE-E97B34EB43A107C3","dt.entity.service.name":"[eks][unguard] likeDb","peticiones (total)":28240,"tiempo de respuesta (avg)":4199.532474203513,"cpu_usage container (avg)":2.368312794022996},{"dt.entity.service":"SERVICE-C183F94EEDB15091","dt.entity.service.name":"[eks][easytrade] easyTradeLoginService","peticiones (total)":28025,"tiempo de respuesta (avg)":8630.693494615409,"cpu_usage container (avg)":12.623738313076434},{"dt.entity.service":"SERVICE-0E016AC3BC121B7F","dt.entity.service.name":"[eks][obslab-release-validation] otelcol-contrib my-otel-demo-otelcol-* on port 4318","peticiones (total)":26867,"tiempo de respuesta (avg)":61216.38339821586,"cpu_usage container (avg)":81.18439723598485},{"dt.entity.service":"SERVICE-FB07FAC8A15B64ED","dt.entity.service.name":"[eks][prod] PHP on shippingholidaysservice-*","peticiones (total)":26296,"tiempo de respuesta (avg)":2544.8412597083216,"cpu_usage container (avg)":6.301370563293004},{"dt.entity.service":"SERVICE-FFB92DD67873FAC7","dt.entity.service.name":"[eks][prod] shippingholidaysservice-*","peticiones (total)":26288,"tiempo de respuesta (avg)":4017.0629751470174,"cpu_usage container (avg)":6.301370563293004},{"dt.entity.service":"SERVICE-F732B9ACA30EE1E5","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":25926,"tiempo de respuesta (avg)":488.0765081179484,"cpu_usage container (avg)":5.4057533319142275},{"dt.entity.service":"SERVICE-D4A3654C815CF4F0","dt.entity.service.name":"[eks][prod] hipstershop.AdService","peticiones (total)":24216,"tiempo de respuesta (avg)":329.2792557894044,"cpu_usage container (avg)":5.247014396894112},{"dt.entity.service":"SERVICE-603320BD8B09C56B","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of server.js (frontend) my-otel-demo-frontend-*","peticiones (total)":17521,"tiempo de respuesta (avg)":8666.02980869188,"cpu_usage container (avg)":131.67599250726678},{"dt.entity.service":"SERVICE-0BE5C424C126B77B","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":17285,"tiempo de respuesta (avg)":468.3613997340173,"cpu_usage container (avg)":5.059226036213272},{"dt.entity.service":"SERVICE-EA26A6FF14A5C3AC","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":17284,"tiempo de respuesta (avg)":697.2479310344827,"cpu_usage container (avg)":21.75314059994074},{"dt.entity.service":"SERVICE-D339B18E0E0D3B96","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":17278,"tiempo de respuesta (avg)":726.501048366471,"cpu_usage container (avg)":11.427495567810366},{"dt.entity.service":"SERVICE-2A6F7DB9CD5DEE30","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":17273,"tiempo de respuesta (avg)":1110.9757302532792,"cpu_usage container (avg)":8.255965199727704},{"dt.entity.service":"SERVICE-69ED28620124F567","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":17268,"tiempo de respuesta (avg)":2692.094701044649,"cpu_usage container (avg)":8.073250760781267},{"dt.entity.service":"SERVICE-8DCB317AF5F6B369","dt.entity.service.name":"[eks][prod] hipstershop.ShippingService","peticiones (total)":17100,"tiempo de respuesta (avg)":741.2757709863553,"cpu_usage container (avg)":5.4057533319142275},{"dt.entity.service":"SERVICE-29362992FCE18A64","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of server.js (frontend) my-otel-demo-frontend-*","peticiones (total)":15078,"tiempo de respuesta (avg)":9725.109553343356,"cpu_usage container (avg)":125.51243861469162},{"dt.entity.service":"SERVICE-A6FDC8C7414C5961","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of kafka.Kafka my-otel-demo-kafka-*","peticiones (total)":13943,"tiempo de respuesta (avg)":332776.29689061403,"cpu_usage container (avg)":24.031969748865887},{"dt.entity.service":"SERVICE-EDF2019330DFC0FD","dt.entity.service.name":"[eks][easytrade] OrderController","peticiones (total)":13907,"tiempo de respuesta (avg)":20346.377927554266,"cpu_usage container (avg)":4.723219224232997},{"dt.entity.service":"SERVICE-897F1C22A227FE62","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of oteldemo.AdService my-otel-demo-adservice-*","peticiones (total)":13784,"tiempo de respuesta (avg)":652.4230458780243,"cpu_usage container (avg)":4.582887742665675},{"dt.entity.service":"SERVICE-EC157A6AE78D234A","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of kafka.Kafka my-otel-demo-kafka-*","peticiones (total)":12613,"tiempo de respuesta (avg)":283.76283828352996,"cpu_usage container (avg)":15.316836677175566},{"dt.entity.service":"SERVICE-484DC80863520EC7","dt.entity.service.name":"[eks][unguard] AdService","peticiones (total)":12464,"tiempo de respuesta (avg)":61955.5670639504,"cpu_usage container (avg)":5.24845404933536},{"dt.entity.service":"SERVICE-909DF299D2904B4F","dt.entity.service.name":"[eks][prod] grpc.health.v1.Health","peticiones (total)":11528,"tiempo de respuesta (avg)":123.8854015979814,"cpu_usage container (avg)":5.247014396894112},{"dt.entity.service":"SERVICE-2AA62FB6E369D478","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of oteldemo.AdService my-otel-demo-adservice-*","peticiones (total)":11478,"tiempo de respuesta (avg)":3173.7069982001813,"cpu_usage container (avg)":5.282143740702789},{"dt.entity.service":"SERVICE-2FA07B5F2B2F48FD","dt.entity.service.name":"[eks][easytrade] engine-* (/api)","peticiones (total)":10060,"tiempo de respuesta (avg)":1147.5626145172812,"cpu_usage container (avg)":3.382274545534373},{"dt.entity.service":"SERVICE-74635B201C18F17C","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of frauddetectionservice-*-all.jar my-otel-demo-frauddetectionservice-*","peticiones (total)":9726,"tiempo de respuesta (avg)":793.3428042954887,"cpu_usage container (avg)":6.345764399770024},{"dt.entity.service":"SERVICE-F4FC8464CC63AF1C","dt.entity.service.name":"my-otel-demo-shippingservice","peticiones (total)":8926,"tiempo de respuesta (avg)":4225.272233079673,"cpu_usage container (avg)":0.14467858241369763},{"dt.entity.service":"SERVICE-AA64B33C31A719DE","dt.entity.service.name":"[eks][unguard] MicroblogController","peticiones (total)":8611,"tiempo de respuesta (avg)":361605.0516501987,"cpu_usage container (avg)":3.462825884125218},{"dt.entity.service":"SERVICE-6468D90FFCF4213A","dt.entity.service.name":"[eks][prod] flask hipstershop production on port 8111","peticiones (total)":7501,"tiempo de respuesta (avg)":35000.841736225564,"cpu_usage container (avg)":2.3199146944111946},{"dt.entity.service":"SERVICE-55565E721D8B42EC","dt.entity.service.name":"[eks][unguard] PHP on unguard-like-service-*","peticiones (total)":7180,"tiempo de respuesta (avg)":180198.9739060469,"cpu_usage container (avg)":12.273242443147641},{"dt.entity.service":"SERVICE-BBDC7559AB725B24","dt.entity.service.name":"[eks][unguard] memberships","peticiones (total)":7172,"tiempo de respuesta (avg)":25028.81083919112,"cpu_usage container (avg)":2.368312794022996},{"dt.entity.service":"SERVICE-F44AF4584A0C4626","dt.entity.service.name":"my-otel-demo-adservice","peticiones (total)":6848,"tiempo de respuesta (avg)":7606.438764032731,"cpu_usage container (avg)":4.582887742665675},{"dt.entity.service":"SERVICE-14ED768074D72365","dt.entity.service.name":"[eks][obslab-log-problem-detection] oteldemo.AdService","peticiones (total)":6843,"tiempo de respuesta (avg)":3952.233068338552,"cpu_usage container (avg)":4.582887742665675},{"dt.entity.service":"SERVICE-96FDD56C59A76A63","dt.entity.service.name":"[eks][unguard] MembershipService","peticiones (total)":6689,"tiempo de respuesta (avg)":33407.5562707237,"cpu_usage container (avg)":6.711938185895091},{"dt.entity.service":"SERVICE-1EFC13C0ECBC53F3","dt.entity.service.name":"[eks][obslab-release-validation] oteldemo.AdService","peticiones (total)":5553,"tiempo de respuesta (avg)":4282.294961693858,"cpu_usage container (avg)":5.282143740702789},{"dt.entity.service":"SERVICE-215BC92FA193D521","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of index.js (paymentservice) my-otel-demo-paymentservice-*","peticiones (total)":5081,"tiempo de respuesta (avg)":8830.23517517589,"cpu_usage container (avg)":5.666737207803809},{"dt.entity.service":"SERVICE-50C05B3DC879FF64","dt.entity.service.name":"[eks][prod] hipstershop.CheckoutService","peticiones (total)":4515,"tiempo de respuesta (avg)":1863638.5301785937,"cpu_usage container (avg)":5.059226036213272},{"dt.entity.service":"SERVICE-6785D812610B95CB","dt.entity.service.name":"[eks][prod] hipstershop.PaymentService","peticiones (total)":4514,"tiempo de respuesta (avg)":798.9252045999785,"cpu_usage container (avg)":8.255965199727704},{"dt.entity.service":"SERVICE-806F65D75A16D19B","dt.entity.service.name":"my-otel-demo-quoteservice","peticiones (total)":4463,"tiempo de respuesta (avg)":459.98370940337884,"cpu_usage container (avg)":0.3365051625677954},{"dt.entity.service":"SERVICE-9B9CE6E3BDE22FF8","dt.entity.service.name":"my-otel-demo-emailservice","peticiones (total)":4463,"tiempo de respuesta (avg)":4722.854931733671,"cpu_usage container (avg)":0.4163520565283828},{"dt.entity.service":"SERVICE-ACF60D274053DBBB","dt.entity.service.name":"[eks][obslab-log-problem-detection] oteldemo.PaymentService","peticiones (total)":4463,"tiempo de respuesta (avg)":1886.639749502965,"cpu_usage container (avg)":5.666737207803809},{"dt.entity.service":"SERVICE-E1C7996F55598930","dt.entity.service.name":"my-otel-demo-paymentservice","peticiones (total)":4463,"tiempo de respuesta (avg)":2227.316035101403,"cpu_usage container (avg)":5.666737207803809},{"dt.entity.service":"SERVICE-E2CC1D7CCB5FF54B","dt.entity.service.name":"my-otel-demo-frauddetectionservice","peticiones (total)":4461,"tiempo de respuesta (avg)":923676.6593352915,"cpu_usage container (avg)":6.345764399770024},{"dt.entity.service":"SERVICE-4371E37747A50B72","dt.entity.service.name":"my-otel-demo-checkoutservice","peticiones (total)":4460,"tiempo de respuesta (avg)":40463014.606482424,"cpu_usage container (avg)":0.5770127211823913},{"dt.entity.service":"SERVICE-7B9F2712988EA38C","dt.entity.service.name":"[eks][prod] hipstershop.EmailService (grpc://hipstershop.EmailService)","peticiones (total)":3568,"tiempo de respuesta (avg)":16395.707410443014,"cpu_usage container (avg)":5.815313431204678},{"dt.entity.service":"SERVICE-619CDC7ED12A4502","dt.entity.service.name":"[eks][unguard] [embedded]","peticiones (total)":2431,"tiempo de respuesta (avg)":273.2178848617546,"cpu_usage container (avg)":4.164452285767558},{"dt.entity.service":"SERVICE-4EDEC65BF29137C0","dt.entity.service.name":"[eks][unguard] BioController","peticiones (total)":1935,"tiempo de respuesta (avg)":7831.853529495963,"cpu_usage container (avg)":4.164452285767558},{"dt.entity.service":"SERVICE-1A54598E98C329BF","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of index.js (paymentservice) my-otel-demo-paymentservice-*","peticiones (total)":1440,"tiempo de respuesta (avg)":4642.482758620688,"cpu_usage container (avg)":5.211456653979956},{"dt.entity.service":"SERVICE-8ABC553C6ED92CDC","dt.entity.service.name":"[eks][unguard] HealthController","peticiones (total)":1440,"tiempo de respuesta (avg)":1032.821379310345,"cpu_usage container (avg)":4.164452285767558},{"dt.entity.service":"SERVICE-92320D3481B3C6A8","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of frauddetectionservice-*-all.jar my-otel-demo-frauddetectionservice-*","peticiones (total)":1440,"tiempo de respuesta (avg)":233.71931034482756,"cpu_usage container (avg)":5.178235464386611},{"dt.entity.service":"SERVICE-D12E8B7BFB489B9D","dt.entity.service.name":"[eks][easytrade] Requests executed in background threads of SpringBoot com.dynatrace.easytrade.engine.EngineApplication easytrade production","peticiones (total)":1439,"tiempo de respuesta (avg)":1969.4973946360158,"cpu_usage container (avg)":3.382274545534373},{"dt.entity.service":"SERVICE-031414F0D4F62E2C","dt.entity.service.name":"[eks][obslab-log-problem-detection] flagd.evaluation.v1.Service (grpc://flagd.evaluation.v1.Service)","peticiones (total)":1431,"tiempo de respuesta (avg)":15811.443283544404,"cpu_usage container (avg)":3.1482758178994112},{"dt.entity.service":"SERVICE-EC87F2589536938D","dt.entity.service.name":"my-otel-demo-imageprovider","peticiones (total)":1077,"tiempo de respuesta (avg)":0,"cpu_usage container (avg)":4.946934662070136},{"dt.entity.service":"SERVICE-E4E56A401973DDDC","dt.entity.service.name":"[eks][unguard] ProxyController","peticiones (total)":965,"tiempo de respuesta (avg)":251554.04987137383,"cpu_usage container (avg)":3.2762156547418497},{"dt.entity.service":"SERVICE-92D7C74992592B65","dt.entity.service.name":"[eks][prod] hipstershop.AdService (grpc://hipstershop.AdService)","peticiones (total)":38,"tiempo de respuesta (avg)":10552.119441765131,"cpu_usage container (avg)":5.247014396894112},{"dt.entity.service":"SERVICE-DE47788FC1E3196F","dt.entity.service.name":"[eks][easytrade] BrokerService.dll easytrade production on port 8080","peticiones (total)":37,"tiempo de respuesta (avg)":11.00969827586207,"cpu_usage container (avg)":119.0964454303709},{"dt.entity.service":"SERVICE-1CFCAC8891549518","dt.entity.service.name":"[eks][prod] server hipstershop production on port 80","peticiones (total)":30,"tiempo de respuesta (avg)":17192.833333333336,"cpu_usage container (avg)":21.75314059994074},{"dt.entity.service":"SERVICE-4EC429847CAEFC9A","dt.entity.service.name":"[eks][easytrade] SpringBoot com.dynatrace.easytrade.thirdpartyservice.Application easytrade production on port 8080","peticiones (total)":24,"tiempo de respuesta (avg)":1085.4,"cpu_usage container (avg)":0.8364909671390399},{"dt.entity.service":"SERVICE-510E5F90E4DFB63B","dt.entity.service.name":"[eks][easytrade] Requests executed in background threads of SpringBoot com.dynatrace.easytrade.creditcardorderservice.Application easytrade production","peticiones (total)":24,"tiempo de respuesta (avg)":287.29655172413794,"cpu_usage container (avg)":4.723219224232997},{"dt.entity.service":"SERVICE-7237C92921E67AAD","dt.entity.service.name":"[eks][obslab-release-validation] flagd.evaluation.v1.Service (grpc://flagd.evaluation.v1.Service)","peticiones (total)":9,"tiempo de respuesta (avg)":25039.428620689654,"cpu_usage container (avg)":2.9991039670113993},{"dt.entity.service":"SERVICE-B54CA2EE037F757E","dt.entity.service.name":"[eks][obslab-release-validation] Requests executed in background threads of kafka.docker.KafkaDockerWrapper my-otel-demo-kafka-*","peticiones (total)":8,"tiempo de respuesta (avg)":14738.193103448275,"cpu_usage container (avg)":24.031969748865887},{"dt.entity.service":"SERVICE-460E9798D30BE79E","dt.entity.service.name":"[eks][obslab-log-problem-detection] Requests executed in background threads of kafka.docker.KafkaDockerWrapper my-otel-demo-kafka-*","peticiones (total)":5,"tiempo de respuesta (avg)":2983.2,"cpu_usage container (avg)":15.316836677175566},{"dt.entity.service":"SERVICE-66730297F84ECB54","dt.entity.service.name":"[eks][prod] hipstershop.ProductCatalogService (grpc://hipstershop.ProductCatalogService)","peticiones (total)":1,"tiempo de respuesta (avg)":2791.9724137931034,"cpu_usage container (avg)":21.75314059994074}],"metadata":{"grail":{"canonicalQuery":"timeseries by:{dt.entity.service}, {`tiempo de respuesta` = avg(dt.service.request.response_time, default:0), peticiones = sum(dt.service.request.count)}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| fieldsAdd entityName(dt.entity.service)\n| fieldsAdd belongs_to = entityAttr(dt.entity.service, \"belongs_to\")\n| fieldsFlatten belongs_to\n| fieldsAdd dt.entity.cloud_application = arrayFirst(belongs_to.dt.entity.cloud_application)\n| filter isNotNull(dt.entity.cloud_application)\n| join \n\t[\n\t\ttimeseries by:{dt.entity.cloud_application}, `cpu_usage container` = avg(dt.kubernetes.container.cpu_usage)\n\t\t| fieldsAdd `cpu_usage container (avg)` = arrayAvg(`cpu_usage container`)\n\t], on:{dt.entity.cloud_application}, fields:{`cpu_usage container`, `cpu_usage container (avg)`}\n| fields dt.entity.service, dt.entity.service.name, `peticiones (total)`, `tiempo de respuesta (avg)`, `cpu_usage container (avg)`","timezone":"America/Bogota","query":"timeseries {`tiempo de respuesta`=avg(dt.service.request.response_time, default:0), peticiones=sum(dt.service.request.count )}, by:{dt.entity.service}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| fieldsAdd entityName(dt.entity.service)\n| fieldsAdd belongs_to = entityAttr(dt.entity.service, \"belongs_to\")\n| fieldsFlatten belongs_to\n| fieldsAdd dt.entity.cloud_application = arrayFirst(belongs_to.dt.entity.cloud_application)\n| filter isNotNull(dt.entity.cloud_application)\n| join [\n  timeseries `cpu_usage container`=avg(dt.kubernetes.container.cpu_usage), by:{dt.entity.cloud_application}\n  | fieldsAdd `cpu_usage container (avg)` = arrayAvg(`cpu_usage container`)\n], on:{dt.entity.cloud_application}, fields: { `cpu_usage container`, `cpu_usage container (avg)` }\n| fields dt.entity.service, dt.entity.service.name, `peticiones (total)`, `tiempo de respuesta (avg)`, `cpu_usage container (avg)` ","scannedRecords":248,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":295070,"analysisTimeframe":{"start":"2024-10-28T07:30:00.000Z","end":"2024-10-29T07:40:00.000Z"},"locale":"en-US","executionTimeMilliseconds":273,"notifications":[],"queryId":"b435b7a1-efd1-430e-b983-fe8743dcdf7a","sampled":false},"metrics":[{"metric.key":"dt.service.request.response_time","displayName":"Service request response time","description":"Response time of a service measured in microseconds on the server side (server side measurements do not include e.g. proxy and networking times). Response time is the time until a response is sent to a calling application, process or other service. It does not include further asynchronous processing. To learn how Dynatrace calculates service timings, see [Service analysis timings](https://dt-url.net/service-timings).","unit":"us","fieldName":"tiempo de respuesta"},{"metric.key":"dt.service.request.count","displayName":"Service request count","description":"Number of requests received by a given service. To learn how Dynatrace detects and analyzes services, see [Services](https://dt-url.net/am-services).","unit":"count","fieldName":"peticiones"},{"metric.key":"dt.kubernetes.container.cpu_usage","displayName":"Kubernetes: Container - CPU usage","description":"This metric measures the total CPU consumed (user usage + system usage) by container. The most detailed level of aggregation is container.","unit":"Millicore","fieldName":"cpu_usage container"}]},"types":[{"mappings":{"dt.entity.service":{"type":"string"},"dt.entity.service.name":{"type":"string"},"peticiones (total)":{"type":"double"},"tiempo de respuesta (avg)":{"type":"double"},"cpu_usage container (avg)":{"type":"double"}},"indexRange":[0,94]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.581Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"timeseries {`tiempo de respuesta`=avg(dt.service.request.response_time, default:0), peticiones=sum(dt.service.request.count )}, by:{dt.entity.service}\n| fieldsAdd `tiempo de respuesta (avg)` = arrayAvg(`tiempo de respuesta`)\n| fieldsAdd `peticiones (total)` = arraySum(peticiones)\n| sort `peticiones (total)` desc\n| fieldsAdd entityName(dt.entity.service)\n| fieldsAdd belongs_to = entityAttr(dt.entity.service, \"belongs_to\")\n| fieldsFlatten belongs_to\n| fieldsAdd dt.entity.cloud_application = arrayFirst(belongs_to.dt.entity.cloud_application)\n| filter isNotNull(dt.entity.cloud_application)\n| join [\n  timeseries `cpu_usage container`=avg(dt.kubernetes.container.cpu_usage), by:{dt.entity.cloud_application}\n  | fieldsAdd `cpu_usage container (avg)` = arrayAvg(`cpu_usage container`)\n], on:{dt.entity.cloud_application}, fields: { `cpu_usage container`, `cpu_usage container (avg)` }\n| fields dt.entity.service, dt.entity.service.name, `peticiones (total)`, `tiempo de respuesta (avg)`, `cpu_usage container (avg)` "}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["dt.entity.service","dt.entity.service.name"],"categoryAxisLabel":"dt.entity.service,dt.entity.service.name","valueAxis":["peticiones (total)","tiempo de respuesta (avg)","cpu_usage container (avg)"],"valueAxisLabel":"peticiones (total),tiempo de respuesta (avg),cpu_usage container (avg)","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","xAxisScaling":"analyzedTimeframe","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.service","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["dt.entity.service","dt.entity.service.name"],"dataMappings":{"value":"peticiones (total)"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"peticiones (total)","rangeAxis":""},{"valueAxis":"tiempo de respuesta (avg)","rangeAxis":""},{"valueAxis":"cpu_usage container (avg)","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.service","dt.entity.service.name"]},"unitsOverrides":[{"identifier":"tiempo de respuesta (avg)","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1730182051506},{"identifier":"cpu_usage container (avg)","unitCategory":"unspecified","baseUnit":"millicore","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1730182078701}],"autoSelectVisualization":false},"state":"success"}},{"id":"98fe6d05-b9f9-4131-8254-5bbb9a375f63","type":"dql","filterSegments":[],"drilldownPath":[],"height":187,"state":{"input":{"value":"describe dt.entity.service\n| filter in(data_types, \"record\")","timeframe":{"from":"now()-24h","to":"now()"}},"visualization":"recordView","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"field":"instantiates","data_types":["record"]},{"field":"belongs_to","data_types":["record"]},{"field":"serviceDetectionAttributes","data_types":["record"]},{"field":"clustered_by","data_types":["record"]},{"field":"sends_to","data_types":["record"]},{"field":"receives_from","data_types":["record"]},{"field":"called_by","data_types":["record"]},{"field":"indirectly_sends_to","data_types":["record"]},{"field":"contains","data_types":["record"]},{"field":"runs_on","data_types":["record"]},{"field":"icon","data_types":["record"]},{"field":"groups","data_types":["record"]},{"field":"calls","data_types":["record"]}],"metadata":{"grail":{"canonicalQuery":"describe dt.entity.service\n| filter in(data_types, \"record\")","timezone":"America/Bogota","query":"describe dt.entity.service\n| filter in(data_types, \"record\")","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-28T07:30:37.256Z","end":"2024-10-29T07:30:37.256Z"},"locale":"en-US","executionTimeMilliseconds":19,"notifications":[],"queryId":"1c46d6c8-d3ba-44ea-b01a-dff16409302c","sampled":false}},"types":[{"mappings":{"field":{"type":"string"},"data_types":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,0]}]}},"indexRange":[0,12]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.275Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"describe dt.entity.service\n| filter in(data_types, \"record\")"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["field"],"categoryAxisLabel":"field","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"field","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","displayedFields":["field"]},"autoSelectVisualization":true},"state":"success"}},{"id":"8a20572b-e028-4cde-bc0a-b8b17c1d4ba3","type":"markdown","markdown":"## Best Practices"},{"id":"1aa04902-6abe-4390-b268-f01dac264f03","type":"markdown","markdown":"# 1. Filtar al inicio.\n"},{"id":"41d33ccb-b477-4496-9360-be92f1ac4955","type":"markdown","markdown":">  ⌛ El **rendimiento** general de las consultas mejora enormemente al reducir el conjunto de datos antes de continuar con el procesamiento. \n\n> 💰 Segmentar la data para filtar por `dt.system.bucket`  y reducir el costo de la query."},{"id":"794c8c86-d47a-49fe-a402-3da28b71479d","type":"dql","filterSegments":[],"drilldownPath":[],"height":84,"showInput":false,"state":{"input":{"value":"fetch events\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}","timeframe":{"from":"now()-30d","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"event.type":"batch_status","count":"6"},{"event.type":"browser_monitor_execution","count":"6"}],"metadata":{"grail":{"canonicalQuery":"fetch events\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize by:{event.type}, count = count()","timezone":"America/Bogota","query":"fetch events\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}","scannedRecords":123407,"dqlVersion":"V1_0","scannedBytes":871298384,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-09-29T07:30:37.274Z","end":"2024-10-29T07:30:37.274Z"},"locale":"en-US","executionTimeMilliseconds":186,"notifications":[],"queryId":"540c07e6-a651-4ce4-8026-a1b29d049ef0","sampled":false}},"types":[{"mappings":{"event.type":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,1]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.309Z","input":{"timeframe":{"from":"now()-30d","to":"now()"},"value":"fetch events\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["event.type"],"categoryAxisLabel":"event.type","valueAxis":["count"],"valueAxisLabel":"count","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","xAxisScaling":"analyzedTimeframe","truncationMode":"middle","hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["event.type"],"dataMappings":{"value":"count"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"count","rangeAxis":""}],"variant":"single","displayedFields":["event.type"]},"autoSelectVisualization":false},"state":"success"}},{"id":"341c10b3-dbdc-4f9f-9a74-3865d73832de","type":"dql","filterSegments":[],"drilldownPath":[],"height":96,"showInput":false,"state":{"input":{"value":"fetch events\n| filter dt.system.bucket ==\"default_synthetic_events\"\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}","timeframe":{"from":"now()-30d","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"event.type":"batch_status","count":"6"},{"event.type":"browser_monitor_execution","count":"6"}],"metadata":{"grail":{"canonicalQuery":"fetch events\n| filter dt.system.bucket == \"default_synthetic_events\"\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize by:{event.type}, count = count()","timezone":"America/Bogota","query":"fetch events\n| filter dt.system.bucket ==\"default_synthetic_events\"\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}","scannedRecords":12,"dqlVersion":"V1_0","scannedBytes":11784,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-09-29T07:30:37.283Z","end":"2024-10-29T07:30:37.283Z"},"locale":"en-US","executionTimeMilliseconds":28,"notifications":[],"queryId":"9dcc39fd-942b-451d-aa8b-b9c71fa8bfe3","sampled":false}},"types":[{"mappings":{"event.type":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,1]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.334Z","input":{"timeframe":{"from":"now()-30d","to":"now()"},"value":"fetch events\n| filter dt.system.bucket ==\"default_synthetic_events\"\n| filter event.kind == \"SYNTHETIC_EVENT\"\n| summarize count = count(), by:{event.type}"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["event.type"],"categoryAxisLabel":"event.type","valueAxis":["count"],"valueAxisLabel":"count","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["event.type"],"dataMappings":{"value":"count"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"count","rangeAxis":""}],"variant":"single","displayedFields":["event.type"]},"autoSelectVisualization":false},"state":"success"}},{"id":"a60ea9e7-605e-48a7-be89-a718378698a0","type":"markdown","markdown":"# 2. Reducir el rango de tiempo de consulta (si aplica)"},{"id":"c9162be4-8de2-4970-bdfc-86e148be5c76","type":"markdown","markdown":"> ⌛💰 De esta forma se escanea menos data y reduce el costo de la query."},{"id":"e3353a4d-8ba6-44e9-a409-876d3ba503d9","type":"markdown","markdown":"# 3. Nombres de campos que se deben evitar\n* true\n* false\n* null\n* mod\n* and\n* or\n* xor\n* not\n"},{"id":"1f56b063-7712-405f-83c6-bbe55caf9f75","type":"dql","title":"❌","filterSegments":[],"drilldownPath":[],"height":77,"state":{"input":{"value":"data record(`true`=\"ejemplo\")","timeframe":{"from":"now()-24h","to":"now()"}},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"value":{"records":[{"true":"ejemplo"}],"metadata":{"grail":{"canonicalQuery":"data record(`true` = \"ejemplo\")","timezone":"America/Bogota","query":"data record(`true`=\"ejemplo\")","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"locale":"en-US","executionTimeMilliseconds":2,"notifications":[],"queryId":"5302ab7d-f62e-498f-887f-699839a43716","sampled":false}},"types":[{"mappings":{"true":{"type":"string"}},"indexRange":[0,0]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"code":200,"notifications":[],"dateTime":"2024-10-29T07:30:38.360Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"data record(`true`=\"ejemplo\")"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["true"],"valueAxis":[],"categoryAxisLabel":"true","valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","displayedFields":["true"]},"autoSelectVisualization":false},"state":"success"}},{"id":"a2508b2e-2c85-47f6-b272-5a7718db3764","type":"markdown","markdown":"## 4. Usar métricas\n> 💰 Si la data ya esta ingestada como métrica, usala.\n\n> 💰 Si utilizas comandos `summarize` o `makeTimeseries` crea métricas a a partir de logs, events, etc."},{"id":"469934ff-ffee-45ac-b356-2ea8d65373ec","type":"markdown","markdown":"## 5. Utilizar opciones para limitar la cantidad de datos escaneados (Logs | Spans⚠️)\n"},{"id":"eaa43610-37e6-469d-92d6-12656e6aba65","type":"dql","title":" exception message","filterSegments":[],"drilldownPath":[],"height":374,"showInput":false,"state":{"input":{"value":"fetch spans\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc","timeframe":{"from":"now()-1h","to":"now()"}},"visualization":"donutChart","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"span.events.exception.message":"Since symfony/http-foundation 5.1: Passing a non-scalar value as 2nd argument to \"Symfony\\Component\\HttpFoundation\\InputBag::get()\" is deprecated, pass a scalar or null instead.","count":"540"},{"span.events.exception.message":"14 UNAVAILABLE: read ECONNRESET","count":"456"},{"span.events.exception.message":"Since symfony/http-foundation 5.1: Retrieving a non-scalar value from \"Symfony\\Component\\HttpFoundation\\InputBag::get()\" is deprecated, and will throw a \"Symfony\\Component\\HttpFoundation\\Exception\\BadRequestException\" exception in Symfony 6.0, use \"S","count":"253"},{"span.events.exception.message":"HTTP 404 setStatus called","count":"234"},{"span.events.exception.message":"failed to charge card: could not charge the card: rpc error: code = Code(400) desc = Credit card info is invalid","count":"56"},{"span.events.exception.message":"failed to charge card: could not charge the card: rpc error: code = Code(400) desc = Sorry, we cannot process mir credit cards. Only VISA or MasterCard is accepted.","count":"49"},{"span.events.exception.message":"null","count":"38"},{"span.events.exception.message":"Credit card info is invalid","count":"28"},{"span.events.exception.message":"Sorry, we cannot process mir credit cards. Only VISA or MasterCard is accepted.","count":"24"},{"span.events.exception.message":"","count":"19"},{"span.events.exception.message":"timeout","count":"8"},{"span.events.exception.message":null,"count":"8"},{"span.events.exception.message":"context deadline exceeded","count":"6"},{"span.events.exception.message":"Canceled","count":"4"},{"span.events.exception.message":"Status(StatusCode=\"FailedPrecondition\", Detail=\"Can't access cart storage. System.ApplicationException: Wasn't able to connect to redis\n   at cartservice.cartstore.ValkeyCartStore.EnsureRedisConnected() in /usr/src/app/src/cartstore/ValkeyCartStore.cs:line 79\n   at cartservice.cartstore.ValkeyCartStore.EmptyCartAsync(String userId) in /usr/src/app/src/cartstore/ValkeyCartStore.cs:line 157\")","count":"4"},{"span.events.exception.message":"404 NOT_FOUND \"Post not found.\"","count":"3"},{"span.events.exception.message":"Bio for user with id '1140' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '1723' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '3647' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '370' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '3966' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '4145' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '4470' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '5551' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '6496' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '6976' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7077' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7704' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7893' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '8044' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '8737' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '9279' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '9584' not found","count":"3"},{"span.events.exception.message":"Socket closed","count":"3"},{"span.events.exception.message":"The target server failed to respond","count":"3"},{"span.events.exception.message":"One or more errors occurred. (The given key '4' was not present in the dictionary.)","count":"1"},{"span.events.exception.message":"The given key '4' was not present in the dictionary.","count":"1"}],"metadata":{"grail":{"canonicalQuery":"fetch spans\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events\n| fields span.events\n| fieldsFlatten span.events\n| fieldsRemove span.events\n| summarize by:{span.events.exception.message}, count = count()\n| sort count desc","timezone":"America/Bogota","query":"fetch spans\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc","scannedRecords":1636914,"dqlVersion":"V1_0","scannedBytes":231541885,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-29T06:30:37.336Z","end":"2024-10-29T07:30:37.336Z"},"locale":"en-US","executionTimeMilliseconds":77,"notifications":[],"queryId":"cfbb9d9a-8c47-4d48-9c11-a595e6d9ca44","sampled":false}},"types":[{"mappings":{"span.events.exception.message":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,36]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.378Z","input":{"timeframe":{"from":"now()-1h","to":"now()"},"value":"fetch spans\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["span.events.exception.message"],"valueAxis":["count"],"categoryAxisLabel":"span.events.exception.message","valueAxisLabel":"count","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","xAxisScaling":"analyzedTimeframe","truncationMode":"middle","hiddenLegendFields":["span.events.span_event"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"span.events.span_event.name","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["span.events.exception.message"],"dataMappings":{"value":"count"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"count","rangeAxis":""}],"variant":"single","displayedFields":["span.events.exception.message"]},"autoSelectVisualization":false},"state":"success"}},{"id":"b87431d3-7663-4c61-b970-d0be2eead153","type":"dql","title":"exception message","filterSegments":[],"drilldownPath":[],"height":374,"showInput":false,"state":{"input":{"value":"fetch spans, scanLimitGBytes:1\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc","timeframe":{"from":"now()-1h","to":"now()"}},"visualization":"donutChart","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"span.events.exception.message":"Since symfony/http-foundation 5.1: Passing a non-scalar value as 2nd argument to \"Symfony\\Component\\HttpFoundation\\InputBag::get()\" is deprecated, pass a scalar or null instead.","count":"540"},{"span.events.exception.message":"14 UNAVAILABLE: read ECONNRESET","count":"456"},{"span.events.exception.message":"Since symfony/http-foundation 5.1: Retrieving a non-scalar value from \"Symfony\\Component\\HttpFoundation\\InputBag::get()\" is deprecated, and will throw a \"Symfony\\Component\\HttpFoundation\\Exception\\BadRequestException\" exception in Symfony 6.0, use \"S","count":"253"},{"span.events.exception.message":"HTTP 404 setStatus called","count":"234"},{"span.events.exception.message":"failed to charge card: could not charge the card: rpc error: code = Code(400) desc = Credit card info is invalid","count":"56"},{"span.events.exception.message":"failed to charge card: could not charge the card: rpc error: code = Code(400) desc = Sorry, we cannot process mir credit cards. Only VISA or MasterCard is accepted.","count":"49"},{"span.events.exception.message":"null","count":"38"},{"span.events.exception.message":"Credit card info is invalid","count":"28"},{"span.events.exception.message":"Sorry, we cannot process mir credit cards. Only VISA or MasterCard is accepted.","count":"24"},{"span.events.exception.message":"","count":"19"},{"span.events.exception.message":"timeout","count":"8"},{"span.events.exception.message":null,"count":"8"},{"span.events.exception.message":"context deadline exceeded","count":"6"},{"span.events.exception.message":"Canceled","count":"4"},{"span.events.exception.message":"Status(StatusCode=\"FailedPrecondition\", Detail=\"Can't access cart storage. System.ApplicationException: Wasn't able to connect to redis\n   at cartservice.cartstore.ValkeyCartStore.EnsureRedisConnected() in /usr/src/app/src/cartstore/ValkeyCartStore.cs:line 79\n   at cartservice.cartstore.ValkeyCartStore.EmptyCartAsync(String userId) in /usr/src/app/src/cartstore/ValkeyCartStore.cs:line 157\")","count":"4"},{"span.events.exception.message":"404 NOT_FOUND \"Post not found.\"","count":"3"},{"span.events.exception.message":"Bio for user with id '1140' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '1723' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '3647' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '370' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '3966' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '4145' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '4470' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '5551' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '6496' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '6976' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7077' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7704' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '7893' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '8044' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '8737' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '9279' not found","count":"3"},{"span.events.exception.message":"Bio for user with id '9584' not found","count":"3"},{"span.events.exception.message":"Socket closed","count":"3"},{"span.events.exception.message":"The target server failed to respond","count":"3"},{"span.events.exception.message":"One or more errors occurred. (The given key '4' was not present in the dictionary.)","count":"1"},{"span.events.exception.message":"The given key '4' was not present in the dictionary.","count":"1"}],"metadata":{"grail":{"canonicalQuery":"fetch spans, scanLimitGBytes:1\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events\n| fields span.events\n| fieldsFlatten span.events\n| fieldsRemove span.events\n| summarize by:{span.events.exception.message}, count = count()\n| sort count desc","timezone":"America/Bogota","query":"fetch spans, scanLimitGBytes:1\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc","scannedRecords":1636914,"dqlVersion":"V1_0","scannedBytes":231541885,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-29T06:30:37.346Z","end":"2024-10-29T07:30:37.346Z"},"locale":"en-US","executionTimeMilliseconds":73,"notifications":[],"queryId":"7b755458-9125-4f9f-943e-2835e48c9837","sampled":false}},"types":[{"mappings":{"span.events.exception.message":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,36]}]},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2024-10-29T07:30:38.866Z","input":{"timeframe":{"from":"now()-1h","to":"now()"},"value":"fetch spans, scanLimitGBytes:1\n\n// only spans which contain a span event of type \"exception\"\n| filter iAny(span.events[][span_event.name] == \"exception\")\n| expand span.events | fields span.events | fieldsFlatten span.events | fieldsRemove span.events\n\n| summarize count = count(), by:{ span.events.exception.message}\n| sort count desc"}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["span.events.exception.message"],"valueAxis":["count"],"categoryAxisLabel":"span.events.exception.message","valueAxisLabel":"count","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","xAxisScaling":"analyzedTimeframe","truncationMode":"middle","hiddenLegendFields":["span.events.span_event"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"span.events.span_event.name","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["span.events.exception.message"],"dataMappings":{"value":"count"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"count","rangeAxis":""}],"variant":"single","displayedFields":["span.events.exception.message"]},"autoSelectVisualization":false},"state":"success"}},{"id":"b6aa802b-3baa-44b7-810f-416b564ba287","type":"markdown","markdown":"## 6. Utilizar las opciones de muestreo disponibles (Logs | Spans⚠️)\nLos rangos de valores aplicables para el muestreo son:\n\n* 1: Default value (no sampling).\n* 10\n* 100\n* 1000\n* 10000: "},{"id":"dd42caba-a5f8-4950-9da9-3b099aa5c92f","type":"dql","filterSegments":[],"drilldownPath":[],"state":{"input":{"value":"fetch logs, from:-7d, samplingRatio:100\n| summarize c = countIf(loglevel == \"ERROR\"), by:bin(timestamp, 3h)\n| fieldsAdd c = c*100","timeframe":{"from":"now()-24h","to":"now()"}},"visualization":"lineChart","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"result":{"code":200,"value":{"records":[{"bin(timestamp, 3h)":"2024-10-22T01:00:00.000000000-05:00","c":"10100"},{"bin(timestamp, 3h)":"2024-10-22T04:00:00.000000000-05:00","c":"16900"},{"bin(timestamp, 3h)":"2024-10-22T07:00:00.000000000-05:00","c":"12100"},{"bin(timestamp, 3h)":"2024-10-22T10:00:00.000000000-05:00","c":"10300"},{"bin(timestamp, 3h)":"2024-10-22T13:00:00.000000000-05:00","c":"7300"},{"bin(timestamp, 3h)":"2024-10-22T16:00:00.000000000-05:00","c":"8900"},{"bin(timestamp, 3h)":"2024-10-22T19:00:00.000000000-05:00","c":"13400"},{"bin(timestamp, 3h)":"2024-10-22T22:00:00.000000000-05:00","c":"8600"},{"bin(timestamp, 3h)":"2024-10-23T01:00:00.000000000-05:00","c":"11100"},{"bin(timestamp, 3h)":"2024-10-23T04:00:00.000000000-05:00","c":"8000"},{"bin(timestamp, 3h)":"2024-10-23T07:00:00.000000000-05:00","c":"10000"},{"bin(timestamp, 3h)":"2024-10-23T10:00:00.000000000-05:00","c":"7400"},{"bin(timestamp, 3h)":"2024-10-23T13:00:00.000000000-05:00","c":"10800"},{"bin(timestamp, 3h)":"2024-10-23T16:00:00.000000000-05:00","c":"8400"},{"bin(timestamp, 3h)":"2024-10-23T19:00:00.000000000-05:00","c":"12400"},{"bin(timestamp, 3h)":"2024-10-23T22:00:00.000000000-05:00","c":"17700"},{"bin(timestamp, 3h)":"2024-10-24T01:00:00.000000000-05:00","c":"16200"},{"bin(timestamp, 3h)":"2024-10-24T04:00:00.000000000-05:00","c":"8900"},{"bin(timestamp, 3h)":"2024-10-24T07:00:00.000000000-05:00","c":"6300"},{"bin(timestamp, 3h)":"2024-10-24T10:00:00.000000000-05:00","c":"10500"},{"bin(timestamp, 3h)":"2024-10-24T13:00:00.000000000-05:00","c":"9100"},{"bin(timestamp, 3h)":"2024-10-24T16:00:00.000000000-05:00","c":"7100"},{"bin(timestamp, 3h)":"2024-10-24T19:00:00.000000000-05:00","c":"7900"},{"bin(timestamp, 3h)":"2024-10-24T22:00:00.000000000-05:00","c":"7600"},{"bin(timestamp, 3h)":"2024-10-25T01:00:00.000000000-05:00","c":"5600"},{"bin(timestamp, 3h)":"2024-10-25T04:00:00.000000000-05:00","c":"4900"},{"bin(timestamp, 3h)":"2024-10-25T07:00:00.000000000-05:00","c":"4800"},{"bin(timestamp, 3h)":"2024-10-25T10:00:00.000000000-05:00","c":"5500"},{"bin(timestamp, 3h)":"2024-10-25T13:00:00.000000000-05:00","c":"5800"},{"bin(timestamp, 3h)":"2024-10-25T16:00:00.000000000-05:00","c":"4900"},{"bin(timestamp, 3h)":"2024-10-25T19:00:00.000000000-05:00","c":"6900"},{"bin(timestamp, 3h)":"2024-10-25T22:00:00.000000000-05:00","c":"6700"},{"bin(timestamp, 3h)":"2024-10-26T01:00:00.000000000-05:00","c":"7100"},{"bin(timestamp, 3h)":"2024-10-26T04:00:00.000000000-05:00","c":"4600"},{"bin(timestamp, 3h)":"2024-10-26T07:00:00.000000000-05:00","c":"8200"},{"bin(timestamp, 3h)":"2024-10-26T10:00:00.000000000-05:00","c":"7000"},{"bin(timestamp, 3h)":"2024-10-26T13:00:00.000000000-05:00","c":"5500"},{"bin(timestamp, 3h)":"2024-10-26T16:00:00.000000000-05:00","c":"6400"},{"bin(timestamp, 3h)":"2024-10-26T19:00:00.000000000-05:00","c":"5200"},{"bin(timestamp, 3h)":"2024-10-26T22:00:00.000000000-05:00","c":"3400"},{"bin(timestamp, 3h)":"2024-10-27T01:00:00.000000000-05:00","c":"6000"},{"bin(timestamp, 3h)":"2024-10-27T04:00:00.000000000-05:00","c":"6200"},{"bin(timestamp, 3h)":"2024-10-27T07:00:00.000000000-05:00","c":"6500"},{"bin(timestamp, 3h)":"2024-10-27T10:00:00.000000000-05:00","c":"7000"},{"bin(timestamp, 3h)":"2024-10-27T13:00:00.000000000-05:00","c":"8100"},{"bin(timestamp, 3h)":"2024-10-27T16:00:00.000000000-05:00","c":"5900"},{"bin(timestamp, 3h)":"2024-10-27T19:00:00.000000000-05:00","c":"5900"},{"bin(timestamp, 3h)":"2024-10-27T22:00:00.000000000-05:00","c":"21500"},{"bin(timestamp, 3h)":"2024-10-28T01:00:00.000000000-05:00","c":"9100"},{"bin(timestamp, 3h)":"2024-10-28T04:00:00.000000000-05:00","c":"7700"},{"bin(timestamp, 3h)":"2024-10-28T07:00:00.000000000-05:00","c":"9100"},{"bin(timestamp, 3h)":"2024-10-28T10:00:00.000000000-05:00","c":"10800"},{"bin(timestamp, 3h)":"2024-10-28T13:00:00.000000000-05:00","c":"12400"},{"bin(timestamp, 3h)":"2024-10-28T16:00:00.000000000-05:00","c":"12100"},{"bin(timestamp, 3h)":"2024-10-28T19:00:00.000000000-05:00","c":"9800"},{"bin(timestamp, 3h)":"2024-10-28T22:00:00.000000000-05:00","c":"9500"},{"bin(timestamp, 3h)":"2024-10-29T01:00:00.000000000-05:00","c":"5600"}],"metadata":{"grail":{"canonicalQuery":"fetch logs, from:-7d, samplingRatio:100\n| summarize by:{bin(timestamp, 3h)}, c = countIf(loglevel == \"ERROR\")\n| fieldsAdd c = c * 100","timezone":"America/Bogota","query":"fetch logs, from:-7d, samplingRatio:100\n| summarize c = countIf(loglevel == \"ERROR\"), by:bin(timestamp, 3h)\n| fieldsAdd c = c*100","scannedRecords":5851641,"dqlVersion":"V1_0","scannedBytes":12017891875,"scannedDataPoints":0,"analysisTimeframe":{"start":"2024-10-22T07:30:38.661Z","end":"2024-10-29T07:30:38.661Z"},"locale":"en-US","executionTimeMilliseconds":493,"notifications":[{"severity":"INFO","messageFormat":"The parameters should be grouped with curly braces: {}.","syntaxPosition":{"start":{"column":50,"index":89,"line":2},"end":{"column":67,"index":106,"line":2}},"messageFormatSpecifierTypes":[],"arguments":[],"notificationType":"PARAMETERS_SHOULD_BE_GROUPED","message":"The parameters should be grouped with curly braces: {}."}],"queryId":"096bec91-bf82-4239-a997-37a7bd460497","sampled":true}},"types":[{"mappings":{"bin(timestamp, 3h)":{"type":"timestamp"},"c":{"type":"long"}},"indexRange":[0,56]}]},"notifications":[{"message":"The parameters should be grouped with curly braces: {}.","severity":"info","notificationType":"PARAMETERS_SHOULD_BE_GROUPED"}],"dateTime":"2024-10-29T07:30:39.750Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"fetch logs, from:-7d, samplingRatio:100\n| summarize c = countIf(loglevel == \"ERROR\"), by:bin(timestamp, 3h)\n| fieldsAdd c = c*100"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color"},"colorPalette":"categorical","valueRepresentation":"absolute","hiddenLegendFields":[],"fieldMapping":{"timestamp":"bin(timestamp, 3h)","leftAxisValues":["c"],"leftAxisDimensions":[]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"bin(timestamp, 3h)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":false},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":[],"dataMappings":{},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"c","rangeAxis":""}],"variant":"single","displayedFields":[]},"autoSelectVisualization":false},"state":"success"}},{"id":"2f8a2de2-8429-4a4c-8324-ae4535ecd08b","type":"markdown","markdown":"## Learn DQL\n![](https://immebwtyjeilyl2quwb2kuo47pblazdk--wkf10640.prod2.apps.dynatrace.com/ui/assets/learn-dql-logo.svg)\n\n[Ir a la APP](https://wkf10640.apps.dynatrace.com/ui/apps/dynatrace.learndql/)"},{"id":"c7e9ddd0-da81-4da8-83c4-69ad80c05e85","type":"markdown","markdown":"---\n**Preguntas o feedback?**: [angelica.barranco@dynatrace.com](mailto:angelica.barranco@dynatrace.com?subject=Feedback%20on%20Grail)\n\nPara obtener más información sobre Dynatrace Query Language (DQL), vaya aquí:\n* [(Doc) Dynatrace Query Language (DQL)](https://docs.dynatrace.com/docs/shortlink/dql-dynatrace-query-language-hub)\n* [(Doc) DQL commands](https://docs.dynatrace.com/docs/shortlink/dql-commands-overview)\n* [(Video) A Practical Guide to DQL](https://www.youtube.com/watch?v=F2VbVqNlswk)\n* [(APP) Learn DQL](https://wkf10640.apps.dynatrace.com/ui/apps/dynatrace.learndql/)"}]}